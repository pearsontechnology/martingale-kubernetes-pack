$type: HeaderPage
props:
  title:
    $map: '`${params.resource} - Logs`'
children:
  $type: Panel
  children:
    $type: Provider
    props:
      provide:
        data:
          url:
            $map: >-
              (params.env?`/api/${params.env}/kube`:"/api/kube")+`/api/v1/namespaces/${params.name}/pods/${params.id}/log?sinceSeconds=3600`
          mapper:
            $mapper: |-
              props.split("\n").filter(l=>!!l).map((l)=>{
                            try{
                              return JSON.parse(l);
                            }catch(e){
                              return {message: l};
                            }
                          })
          refresh: 5000
      Component:
        $component: Table
paths:
  - /kubernetes/namespace/:name/pod/:id/logs
  - /kubernetes/:env/namespace/:name/pod/:id/logs
